<h2><%= title %></h2>

<%= render 'layouts/errors', object: @patient %>

<%= form_with model: @patient, url: path do |f| %>
    <% if !logged_in? %>
        <%= f.label :username %>
        <%= f.text_field :username %>
        <br><br>
        <%= f.label :password %>
        <%= f.password_field :password %>
        <br>
        <%= f.label :password_confirmation, "Confirm Password" %>
        <%= f.password_field :password_confirmation %>
        <br><br>
        <%= f.label :first_name, "First Name" %>
        <%= f.text_field :first_name %>
        <%= f.label :last_name, "Last Name" %>
        <%= f.text_field :last_name %>
        <br><br>
        <%= f.label :sex %>
        <%= f.select :sex, [["Male", "male"], ["Female", "female"], ["Unknown", "unknown"], ["Not Applicable", "not_applicable"]], include_blank: "Please select" %>
        <br><br>
        <%= f.label :dob, "Date of Birth" %>
        <%= f.date_select :dob, start_year: Date.today.year - 120, end_year: Date.today.year, order: [:month, :day, :year], prompt: true %> 
        <br><br>
        <%= f.submit "Create Account", data: {confirm: "Does everything look accurate? You cannot change your information once your account has been created."} %>
    <% end %>
    <% if logged_in_as_provider %>
        <%= f.hidden_field :is_provider, value: true %>
        <%= f.label :username %>
        <%= f.text_field :username, disabled: true %>
        <br><br>
        <%= f.label :first_name, "First Name" %>
        <%= f.text_field :first_name %>
        <%= f.label :last_name, "Last Name" %>
        <%= f.text_field :last_name %>
        <br><br>
        <%= f.label :sex %>
        <%= f.select :sex, [["Male", "male"], ["Female", "female"], ["Unknown", "unknown"], ["Not Applicable", "not_applicable"]], include_blank: "Please select" %>
        <br><br>
        <%= f.label :dob, "Date of Birth" %>
        <%= f.date_select :dob, start_year: Date.today.year - 120, end_year: Date.today.year, order: [:month, :day, :year], prompt: true %> 
        <br><br>
        <%= f.submit "Update Patient File", data: {confirm: "Are you sure you want to save these changes?"} %>
    <% end %>
    <% if current_user?(@patient) %>
        <%= f.label :username %>
        <%= f.text_field :username %>
        <br><br>
        <%= f.label :password %>
        <%= f.password_field :password %>
        <br>
        <%= f.label :password_confirmation, "Confirm Password" %>
        <%= f.password_field :password_confirmation %>
        <br><br>
        <%= f.label :first_name, "First Name" %>
        <%= f.text_field :first_name, disabled: true %>
        <%= f.label :last_name, "Last Name" %>
        <%= f.text_field :last_name, disabled: true %>
        <br><br>
        <%= f.label :sex %>
        <%= f.select :sex, [["Male", "male"], ["Female", "female"], ["Unknown", "unknown"], ["Not Applicable", "not_applicable"]], {include_blank: "Please select"}, disabled: true %>
        <br><br>
        <%= f.label :dob, "Date of Birth" %>
        <%= f.date_select :dob, start_year: Date.today.year - 120, end_year: Date.today.year, order: [:month, :day, :year], prompt: true, disabled: true %> 
        <br><br>
        <%= f.submit "Save changes", data: {confirm: "Are you sure you want to save these changes?"} %>
    <% end %>
<% end %>